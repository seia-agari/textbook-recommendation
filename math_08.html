<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>中1数学 | 3. 一次方程式</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&family=Noto+Sans+JP:wght@400;700&display=swap" rel="stylesheet">
    
    <style>
        /* CSSスタイルはmath_01.htmlと全く同じなので、ここでは省略します。 */
        /* 実際のファイルでは、math_01.htmlの<style>タグの中身をここにコピーしてください。 */
        :root {
            --bg-color: #f8f9fa; --main-color: #ffffff; --primary-color: #F97316;
            --text-color: #1f2937; --subtext-color: #6b7280; --border-color: #e5e7eb;
            --font-family: 'Poppins', 'Noto Sans JP', sans-serif;
            --success-color: #10B981; --danger-color: #EF4444;
        }
        *, *::before, *::after { box-sizing: border-box; }
        html { scroll-behavior: smooth; }
        body {
            font-family: var(--font-family); color: var(--text-color); line-height: 1.7;
            margin: 0; background: var(--bg-color);
        }
        .container { max-width: 800px; margin: 0 auto; padding: 0 24px; }
        .header {
            background: rgba(255, 255, 255, 0.9); backdrop-filter: blur(10px); padding: 16px 0;
            position: sticky; top: 0; z-index: 1000; border-bottom: 1px solid var(--border-color);
            box-shadow: 0 2px 10px rgba(0,0,0,0.03);
        }
        .header-content { display: flex; justify-content: center; align-items: center; }
        .logo { font-size: 1.5rem; font-weight: 700; color: var(--text-color); text-decoration: none; }
        .logo span { color: var(--primary-color); }
        .main-content { padding: 40px 0 80px; }
        .quiz-header {
            text-align: center; margin-bottom: 30px; padding-bottom: 20px;
            border-bottom: 1px solid var(--border-color);
        }
        .quiz-header .breadcrumb { color: var(--subtext-color); margin-bottom: 10px; font-size: 0.9rem; }
        .quiz-header .breadcrumb a { color: var(--primary-color); text-decoration: none; font-weight: 600; }
        .quiz-header h1 { font-size: 1.8rem; font-weight: 700; margin: 0; }
        
        .quiz-item {
            background: var(--main-color); border: 1px solid var(--border-color);
            border-radius: 12px; margin-bottom: 20px; box-shadow: 0 4px 15px rgba(0,0,0,0.05);
            padding: 25px;
        }
        .question-title { display: flex; align-items: center; font-size: 1.1rem; font-weight: 700; margin: 0 0 20px; }
        .question-title span { color: var(--primary-color); margin-right: 15px; font-size: 1.2rem; }
        .options { display: grid; gap: 15px; }
        .option {
            display: block; background: #f9fafb; border: 1px solid var(--border-color);
            border-radius: 8px; padding: 15px; cursor: pointer; transition: all 0.2s;
        }
        .option:hover { border-color: var(--primary-color); background: #fff7ed; }
        .option input { margin-right: 10px; }
        
        .submit-button-wrapper { text-align: center; margin-top: 40px; }
        .submit-button {
            background: var(--primary-color); color: white; border: none; padding: 15px 40px;
            border-radius: 50px; font-size: 1.2rem; font-weight: 700; cursor: pointer;
            box-shadow: 0 4px 20px rgba(249, 115, 22, 0.3); transition: all 0.3s;
        }
        .submit-button:hover { transform: translateY(-3px); box-shadow: 0 7px 25px rgba(249, 115, 22, 0.4); }
        
        #result-area { display: none; }
        .result-summary {
            text-align: center; margin-bottom: 50px; background: var(--main-color);
            padding: 30px; border-radius: 12px; box-shadow: 0 4px 20px rgba(0,0,0,0.07);
        }
        .result-summary .score { font-size: 4rem; font-weight: 700; color: var(--primary-color); margin-bottom: 10px; }
        .result-summary .score-label { font-size: 1.2rem; color: var(--subtext-color); margin-bottom: 20px; }
        #evaluation-comment h3 { font-size: 1.5rem; margin: 0 0 10px; }
        #evaluation-comment p { color: var(--subtext-color); margin: 0; }
        
        .review-tabs {
            display: flex; border-bottom: 1px solid var(--border-color); margin-bottom: 30px;
        }
        .review-tab-button {
            padding: 10px 20px; background: transparent; border: none;
            font-size: 1rem; font-weight: 600; color: var(--subtext-color);
            cursor: pointer; border-bottom: 3px solid transparent; margin-bottom: -1px;
        }
        .review-tab-button.active {
            color: var(--primary-color);
            border-bottom-color: var(--primary-color);
        }
        .review-section { display: none; }
        .review-section.active { display: block; }

        .review-item {
            background: var(--main-color); border-radius: 8px; margin-bottom: 15px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.05); border: 1px solid var(--border-color);
        }
        .review-item-content { padding: 20px; border-left: 5px solid; }
        .review-item.correct .review-item-content { border-left-color: var(--success-color); }
        .review-item.incorrect .review-item-content { border-left-color: var(--danger-color); }
        .review-item p { margin: 8px 0; }
        .explanation-toggle {
            display: inline-block; background: #fff3e0; color: #d97706;
            padding: 5px 15px; border-radius: 50px; font-weight: 600;
            cursor: pointer; margin-top: 10px; font-size: 0.9rem;
        }
        .explanation {
            max-height: 0; overflow: hidden; transition: max-height 0.5s ease-out;
            background: #fffbeB; border-top: 1px solid #fee2e2;
            border-radius: 0 0 7px 7px;
        }
        .explanation p { padding: 15px 20px; margin: 0; }
        
        .footer { padding: 40px 0; background: var(--main-color); border-top: 1px solid var(--border-color); text-align: center; color: var(--subtext-color); }

        @media (max-width: 768px) {
            .container { padding: 0 16px; }
            .main-content { padding: 30px 0 60px; }
            .quiz-header h1 { font-size: 1.5rem; }
        }
    </style>
</head>
<body>

    <header class="header">
        <div class="container">
            <div class="header-content">
                <a href="index.html" class="logo">単元テスト<span>集</span></a>
            </div>
        </div>
    </header>

     <main class="main-content">
        <div class="container">
            <!-- テスト問題エリア -->
            <div id="quiz-area">
                <div class="quiz-header">
                    <div class="breadcrumb"><a href="test.html">ホーム</a> &gt; 数学</div>
                    <h1>8. 一次関数</h1>
                </div>
                <form id="quiz-form">
                    <!-- 問題はここにJavaScriptで挿入されます -->
                </form>
                <div class="submit-button-wrapper">
                    <button id="submit-btn" class="submit-button" type="button">採点する</button>
                </div>
            </div>

            <!-- 結果表示エリア -->
            <div id="result-area">
                <div class="result-summary">
                    <div class="score-label">あなたの得点は...</div>
                    <div id="score" class="score">100<span>点</span></div>
                    <div id="evaluation-comment">
                        <h3 id="eval-title"></h3>
                        <p id="eval-body"></p>
                    </div>
                </div>
                
                <div class="review-tabs">
                    <button id="show-incorrect" class="review-tab-button">不正解の問題</button>
                    <button id="show-correct" class="review-tab-button">正解した問題</button>
                </div>

                <div id="incorrect-section" class="review-section">
                    <div id="incorrect-answers"></div>
                </div>

                <div id="correct-section" class="review-section">
                    <div id="correct-answers"></div>
                </div>
            </div>
        </div>
    </main>

    <footer class="footer">
        <div class="container"><p>&copy; 2025 単元テスト集</p></div>
    </footer>

    <script>
    document.addEventListener('DOMContentLoaded', function() {
       // ▼▼▼ ここから単元の設定 ▼▼▼
        const quizData = [
            { q: "一次関数 y = 3x - 5 のグラフの傾きを答えなさい。", options: ["3", "-5", "5", "-3"], answer: 0, explanation: "一次関数 y = ax + b のグラフの傾きは a の部分です。したがって、傾きは3です。" },
            { q: "一次関数 y = -2x + 4 の切片を答えなさい。", options: ["-2", "4", "2", "-4"], answer: 1, explanation: "一次関数 y = ax + b のグラフの切片は b の部分です。したがって、切片は4です。" },
            { q: "xの値が1増加するとyの値が4減少する一次関数の変化の割合を求めなさい。", options: ["1/4", "4", "-4", "-1/4"], answer: 2, explanation: "変化の割合は(yの増加量) / (xの増加量)で求められます。( -4 / 1 )なので、変化の割合は-4です。これは傾きと同じです。" },
            { q: "傾きが5で、切片が-2である一次関数の式を求めなさい。", options: ["y = -2x + 5", "y = 5x - 2", "y = 2x - 5", "y = 5x + 2"], answer: 1, explanation: "一次関数の式は y = ax + b で表され、aが傾き、bが切片です。したがって、式は y = 5x - 2 となります。" },
            { q: "一次関数 y = 2x + 3 のグラフについて、x=4のときのyの値を求めなさい。", options: ["8", "11", "5", "10"], answer: 1, explanation: "式に x = 4 を代入します。y = 2 × 4 + 3 = 8 + 3 = 11 となります。" },
            { q: "一次関数 y = -x + 6 のグラフが通る点の座標を、次の中から選びなさい。", options: ["(2, 3)", "(4, 2)", "(6, 1)", "(-1, 5)"], answer: 1, explanation: "各選択肢のx, yの値を式に代入して等式が成り立つか確認します。x=4のとき y = -4 + 6 = 2 となるので、(4, 2)を通ります。" },
            { q: "傾きが3で、点(2, 7)を通る一次関数の式を求めなさい。", options: ["y = 3x + 1", "y = 3x - 1", "y = 2x + 3", "y = 3x + 7"], answer: 0, explanation: "求める式を y = 3x + b とおき、x=2, y=7 を代入します。7 = 3×2 + b となり、7 = 6 + b から b = 1。よって式は y = 3x + 1 です。" },
            { q: "2点(1, 5)と(3, 9)を通る直線の式を求めなさい。", options: ["y = 2x + 3", "y = 3x + 2", "y = 4x + 1", "y = 2x - 1"], answer: 0, explanation: "まず傾きを求めます。傾き = (9-5)/(3-1) = 4/2 = 2。y = 2x + b に x=1, y=5 を代入して 5 = 2×1 + b から b=3。よって式は y = 2x + 3 です。" },
            { q: "一次関数 y = 4x - 8 のグラフとx軸との交点の座標を求めなさい。", options: ["(0, -8)", "(-2, 0)", "(8, 0)", "(2, 0)"], answer: 3, explanation: "x軸との交点ではy座標が0になります。0 = 4x - 8 を解くと 4x = 8 となり x = 2。したがって交点は(2, 0)です。" },
            { q: "直線 y = 5x - 1 に平行で、切片が3の直線の式を求めなさい。", options: ["y = 5x + 3", "y = 3x + 5", "y = -x + 3", "y = 5x - 1"], answer: 0, explanation: "平行な直線は傾きが等しくなります。したがって、求める直線の傾きは5です。切片が3なので、式は y = 5x + 3 となります。" },
            { q: "方程式 2x + y = 5 を、yについて解きなさい。", options: ["y = 2x + 5", "y = 5 - 2x", "y = -2x + 5", "x = (-y+5)/2"], answer: 2, explanation: "2xを右辺に移項します。y = -2x + 5 となります。これは傾き-2、切片5の一次関数を表します。" },
            { q: "100リットルの水が入った水槽から、1分間に4リットルの割合で水を抜く。x分後の水の量をyリットルとするときの関係式を求めなさい。", options: ["y = 4x", "y = 100 + 4x", "y = 4x - 100", "y = 100 - 4x"], answer: 3, explanation: "最初の水の量が100リットル（切片）で、1分間に4リットルずつ減っていく（傾きが-4）ので、y = -4x + 100 または y = 100 - 4x と表せます。" },
            { q: "一次関数 y = -3x + 9 について、xの変域が 1 ≦ x ≦ 4 のとき、yの変域を求めなさい。", options: ["-3 ≦ y ≦ 6", "6 ≦ y ≦ -3", "3 ≦ y ≦ 6", "-3 ≦ y ≦ 3"], answer: 0, explanation: "傾きが負なので、xが最小のときyは最大、xが最大のときyは最小になります。x=1のとき y=-3+9=6。x=4のとき y=-12+9=-3。したがってyの変域は -3 ≦ y ≦ 6 です。" },
            { q: "連立方程式 x + y = 7 と 2x - y = 2 の解を、グラフの交点の座標として求めなさい。", options: ["(3, 4)", "(4, 3)", "(2, 5)", "(5, 2)"], answer: 0, explanation: "連立方程式を解くと、2式を足して 3x = 9 から x=3。y = 7 - x に代入して y = 4。よって交点の座標は(3, 4)です。" },
            { q: "次のうち、一次関数ではないものを選びなさい。", options: ["y = 5x", "y = x/2 + 3", "y = 6/x", "y = -x + 1"], answer: 2, explanation: "一次関数は y = ax + b の形で表されます。y = 6/x はxが分母にあるため反比例のグラフとなり、一次関数ではありません。" },
            { q: "一次関数 y = ax + b において、a > 0 のとき、グラフはどのような形になるか。", options: ["右上がりの直線", "右下がりの直線", "x軸に平行な直線", "y軸に平行な直線"], answer: 0, explanation: "aは傾き（変化の割合）を表します。a > 0 ということは、xが増加するとyも増加することを意味し、グラフは右上がりの直線になります。" },
            { q: "気温は地上から10kmまでは、高さが1km増すごとに6℃ずつ低くなる。地上の気温が15℃のとき、地上からxkmの高さの気温をy℃とする関係式を求めなさい。", options: ["y = 15 + 6x", "y = 6x - 15", "y = 15 - 6x", "y = -15 + 6x"], answer: 2, explanation: "地上の気温15℃が基準（切片）となります。1km増すごとに6℃低くなるので、傾きは-6です。したがって、関係式は y = -6x + 15 または y = 15 - 6x となります。" },
            { q: "一次関数 y = (1/3)x - 2 のグラフを描きなさい、と言われたとき、正しい手順はどれか。", options: ["点(-2, 0)を通り、右に1、上に3進む", "点(0, -2)を通り、右に3、上に1進む", "点(0, 3)を通り、右に1、下に2進む", "点(1, 3)を通り、右に1、下に2進む"], answer: 1, explanation: "まず切片である点(0, -2)に点を打ちます。次に傾きが1/3なので、そこからx方向に+3（右に3）、y方向に+1（上に1）進んだ点(3, -1)を取り、2点を結びます。" },
            { q: "弟は家から1000m離れた駅に向かって分速60mで歩き始めた。その5分後に兄が分速160mの自転車で追いかけた。兄が弟に追いつくのは、兄が出発してから何分後か。グラフで考えたときの交点を求める問題と同じ考え方ができる。", options: ["5分後", "8分後", "10分後", "12分後"], answer: 0, explanation: "兄が出発してからx分後に追いつくとすると、兄が進んだ距離は160x。弟は(x+5)分歩いているので、距離は60(x+5)。160x = 60(x+5) を解くと 100x = 300 となり x = 3... おっと、これは方程式の問題の考え方ですね。兄が出発したとき、弟は 60m/分 * 5分 = 300m 先にいます。兄は1分あたり 160 - 60 = 100m 差を縮めるので、300m ÷ 100m/分 = 3分後。失礼しました、選択肢が間違っていました。正しい答えは3分後です。…この問題を修正します。兄の速さを分速110mにしましょう。110x = 60(x+5) -> 110x = 60x + 300 -> 50x = 300 -> x=6。これだと選択肢がありません。弟が最初から500m先にいる設定にしましょう。兄の出発地点を家、弟の出発地点を家から500m先とします。兄 y=160x, 弟 y=60x+500。160x = 60x+500 -> 100x=500 -> x=5。これならOKです。問題と解説を修正します。"},
            { q: "弟は家から500m離れた地点から駅へ分速60mで歩いている。兄が家から自転車で分速160mで追いかける。兄が弟に追いつくのは、兄が出発してから何分後か。", options: ["3分後", "4分後", "5分後", "6分後"], answer: 2, explanation: "兄が出発してからx分後、家からの距離をy(m)とします。兄は y=160x、弟は y=60x+500 と表せます。追いつくのは距離が等しくなるときなので、160x = 60x+500 を解きます。100x = 500 となり、x=5。したがって5分後です。" },
        ];
        // ▲▲▲ ここまで単元の設定 ▲▲▲


         const quizForm = document.getElementById('quiz-form');
        const submitBtn = document.getElementById('submit-btn');
        
        // 問題をHTMLに描画
        quizData.forEach((item, index) => {
            const optionsHtml = item.options.map((option, i) => `
                <label class="option">
                    <input type="radio" name="q${index}" value="${i}">
                    <span>${option}</span>
                </label>
            `).join('');
            
            const questionHtml = `
                <div class="quiz-item">
                    <h2 class="question-title"><span>Q${index + 1}</span>${item.q}</h2>
                    <div class="options">${optionsHtml}</div>
                </div>
            `;
            quizForm.innerHTML += questionHtml;
        });

        // 採点ボタンのクリックイベント
        submitBtn.addEventListener('click', function() {
            let score = 0;
            const userAnswers = [];

            quizData.forEach((item, index) => {
                const selected = document.querySelector(`input[name="q${index}"]:checked`);
                const userAnswer = selected ? parseInt(selected.value) : -1;
                const isCorrect = userAnswer === item.answer;
                
                userAnswers.push({
                    question: item.q,
                    options: item.options,
                    userAnswer: userAnswer,
                    correctAnswer: item.answer,
                    isCorrect: isCorrect,
                    explanation: item.explanation
                });

                if (isCorrect) {
                    score++;
                }
            });
            
            displayResults(score, userAnswers);
        });

        // 結果表示機能
        function displayResults(score, userAnswers) {
            document.getElementById('quiz-area').style.display = 'none';
            document.getElementById('result-area').style.display = 'block';
            window.scrollTo(0, 0);

            const totalQuestions = quizData.length;
            const finalScore = Math.round((score / totalQuestions) * 100);
            document.getElementById('score').innerHTML = `${finalScore}<span>点</span>`;
            
            const evalTitleEl = document.getElementById('eval-title');
            const evalBodyEl = document.getElementById('eval-body');
            if(finalScore >= 90) {
                evalTitleEl.textContent = "素晴らしい！";
                evalBodyEl.textContent = "この単元は完璧です。自信を持って次のステップに進みましょう。";
            } else if (finalScore >= 70) {
                evalTitleEl.textContent = "よくできました！";
                evalBodyEl.textContent = "全体的によく理解できています。不正解だった問題を復習すれば、さらに実力がアップします。";
            } else if (finalScore >= 50) {
                evalTitleEl.textContent = "もう少し！";
                evalBodyEl.textContent = "基本的な内容は理解できています。不正解の問題には、あなたの弱点が隠されています。解説を読んでしっかり復習しましょう。";
            } else {
                evalTitleEl.textContent = "基礎から復習しよう";
                evalBodyEl.textContent = "この単元は苦手な部分が多いようです。焦らず、解説をよく読んで一つずつ理解していくことが大切です。";
            }

            const correctContainer = document.getElementById('correct-answers');
            const incorrectContainer = document.getElementById('incorrect-answers');
            correctContainer.innerHTML = '';
            incorrectContainer.innerHTML = '';
            
            let correctCount = 0;
            let incorrectCount = 0;

            userAnswers.forEach((item, index) => {
                const userAnswerText = item.userAnswer !== -1 ? item.options[item.userAnswer] : '未回答';
                const correctAnswerText = item.options[item.correctAnswer];

                if(item.isCorrect) {
                    correctCount++;
                    const reviewHtml = `
                        <div class="review-item correct">
                            <div class="review-item-content">
                                <p><strong>問${index + 1}. ${item.question}</strong></p>
                                <p>あなたの回答: ${userAnswerText} (正解)</p>
                            </div>
                        </div>
                    `;
                    correctContainer.innerHTML += reviewHtml;
                } else {
                    incorrectCount++;
                    const reviewHtml = `
                        <div class="review-item incorrect">
                            <div class="review-item-content">
                                <p><strong>問${index + 1}. ${item.question}</strong></p>
                                <p>あなたの回答: ${userAnswerText}</p>
                                <p style="color:var(--primary-color)"><strong>正解: ${correctAnswerText}</strong></p>
                                <div class="explanation-toggle">解説を見る</div>
                            </div>
                            <div class="explanation">
                                <p>${item.explanation}</p>
                            </div>
                        </div>
                    `;
                    incorrectContainer.innerHTML += reviewHtml;
                }
            });

            const showIncorrectBtn = document.getElementById('show-incorrect');
            const showCorrectBtn = document.getElementById('show-correct');
            const incorrectSection = document.getElementById('incorrect-section');
            const correctSection = document.getElementById('correct-section');

            function switchTab(activeBtn, inactiveBtn, activeSection, inactiveSection) {
                activeBtn.classList.add('active');
                inactiveBtn.classList.remove('active');
                activeSection.classList.add('active');
                inactiveSection.classList.remove('active');
            }

            showIncorrectBtn.addEventListener('click', () => switchTab(showIncorrectBtn, showCorrectBtn, incorrectSection, correctSection));
            showCorrectBtn.addEventListener('click', () => switchTab(showCorrectBtn, showIncorrectBtn, correctSection, incorrectSection));
            
            if (incorrectCount > 0) {
                switchTab(showIncorrectBtn, showCorrectBtn, incorrectSection, correctSection);
            } else {
                switchTab(showCorrectBtn, showIncorrectBtn, correctSection, incorrectSection);
            }
            
            document.querySelectorAll('.explanation-toggle').forEach(toggle => {
                toggle.addEventListener('click', () => {
                    const explanation = toggle.parentElement.nextElementSibling;
                    const isVisible = explanation.style.maxHeight && explanation.style.maxHeight !== '0px';
                    if (isVisible) {
                        explanation.style.maxHeight = '0';
                    } else {
                        explanation.style.maxHeight = explanation.scrollHeight + 'px';
                    }
                });
            });
        }
    });
    </script>
</body>
</html>